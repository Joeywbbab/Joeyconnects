@import url('https://fonts.googleapis.com/css2?family=Courier+Prime:ital,wght@0,400;0,700;1,400;1,700&family=Inter:wght@300;400;500;600;700;800&family=Playfair+Display:ital,wght@0,400;0,700;0,800;1,400;1,700&family=IBM+Plex+Mono:wght@300;400;500;700&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* Zinestyle 颜色系统 */
    --color-paper: #f4f1ea;
    --color-paper-light: #faf9f6;
    --color-paper-dark: #e9e4d9;
    --color-ink: #1a1a1a;
    --color-ink-light: #333333;
    --color-accent-red: #dc2626;
    --color-accent-blue: #3b82f6;
    --color-accent-orange: #f97316;

    /* 透明度变体 */
    --color-ink-10: rgba(26, 26, 26, 0.1);
    --color-ink-20: rgba(26, 26, 26, 0.2);
    --color-ink-40: rgba(26, 26, 26, 0.4);
    --color-ink-60: rgba(26, 26, 26, 0.6);

    /* 字号系统 */
    --fs-xs: 10px;
    --fs-sm: 12px;
    --fs-base: 14px;
    --fs-lg: 16px;
    --fs-xl: 20px;
    --fs-2xl: 28px;
    --fs-3xl: 40px;
    --fs-4xl: 56px;
    --fs-5xl: 80px;
    --fs-6xl: 120px;

    /* 字重系统 */
    --fw-light: 300;
    --fw-normal: 400;
    --fw-medium: 500;
    --fw-bold: 700;
    --fw-black: 800;

    /* 间距系统 */
    --spacing-xs: 4px;
    --spacing-sm: 8px;
    --spacing-md: 16px;
    --spacing-lg: 24px;
    --spacing-xl: 32px;
    --spacing-2xl: 48px;
    --spacing-3xl: 64px;
    --spacing-4xl: 96px;

    /* 过渡系统 */
    --transition-fast: 150ms ease;
    --transition-normal: 300ms ease;
    --transition-slow: 500ms ease;
    --transition-slower: 700ms ease;
    --transition-slowest: 1000ms ease;
  }

  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }

  html {
    scroll-behavior: smooth;
    font-size: 16px;
    @apply antialiased;
  }

  body {
    background-color: var(--color-paper);
    color: var(--color-ink);
    font-family: 'Inter', 'Segoe UI', system-ui, sans-serif;
    font-size: var(--fs-base);
    font-weight: var(--fw-normal);
    line-height: 1.6;
    overflow-x: hidden;
  }

  /* 字体类 */
  .font-typewriter {
    font-family: 'Courier Prime', Courier, monospace;
  }

  .font-serif {
    font-family: 'Playfair Display', serif;
  }

  .font-mono {
    font-family: 'IBM Plex Mono', monospace;
  }

  h1, h2, h3, h4, h5, h6 {
    font-family: 'Playfair Display', serif;
    font-weight: var(--fw-bold);
    line-height: 1.1;
  }

  h1 {
    font-size: var(--fs-5xl);
    font-style: italic;
  }

  h2 {
    font-size: var(--fs-4xl);
    font-style: italic;
  }

  h3 {
    font-size: var(--fs-3xl);
  }

  h4 {
    font-size: var(--fs-2xl);
  }

  a {
    color: inherit;
    text-decoration: none;
    transition: color var(--transition-fast);
  }

  a:hover {
    color: var(--color-accent-red);
  }
}

@layer components {
  /* 背景网格效果 */
  .bg-grid {
    background-image:
      linear-gradient(to right, rgba(0,0,0,0.03) 1px, transparent 1px),
      linear-gradient(to bottom, rgba(0,0,0,0.03) 1px, transparent 1px);
    background-size: 30px 30px;
  }

  /* 纸张纹理覆盖 */
  .paper-overlay {
    pointer-events: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    opacity: 0.04;
    background-image: url('https://www.transparenttextures.com/patterns/pinstriped-suit.png');
    z-index: 9999;
  }

  /* Halftone 网点效果 */
  .halftone {
    position: relative;
  }

  .halftone::after {
    content: "";
    position: absolute;
    inset: 0;
    background-image: radial-gradient(rgba(0,0,0,0.2) 1px, transparent 0);
    background-size: 3px 3px;
    pointer-events: none;
    mix-blend-mode: multiply;
  }

  /* 撕纸边缘效果 */
  .tear-edge {
    clip-path: polygon(0% 2%, 5% 0%, 10% 3%, 15% 1%, 20% 4%, 25% 1%, 30% 3%, 35% 0%, 40% 4%, 45% 1%, 50% 3%, 55% 0%, 60% 4%, 65% 1%, 70% 3%, 75% 0%, 80% 4%, 85% 1%, 90% 3%, 95% 0%, 100% 2%, 100% 98%, 95% 100%, 90% 97%, 85% 100%, 80% 96%, 75% 100%, 70% 97%, 65% 100%, 60% 96%, 55% 100%, 50% 97%, 45% 100%, 40% 96%, 35% 100%, 30% 97%, 25% 100%, 20% 96%, 15% 100%, 10% 97%, 5% 100%, 0% 98%);
  }

  /* 导航链接 */
  .nav-link {
    @apply font-typewriter text-sm relative px-2;
  }

  .nav-link-active {
    @apply font-black border-b-2 border-red-600;
  }

  .nav-link-inactive {
    @apply opacity-40 hover:opacity-100 transition-opacity;
  }

  /* 按钮样式 */
  .btn-primary {
    @apply bg-black text-white px-8 py-4 font-mono text-xs uppercase tracking-widest
           hover:bg-red-600 transition-all flex items-center gap-4 shadow-xl;
  }

  .btn-secondary {
    @apply border-2 border-black/10 px-6 py-4 font-mono text-xs uppercase tracking-widest
           hover:border-red-600 hover:bg-red-600 hover:text-white transition-all;
  }

  .btn-ghost {
    @apply p-2 border border-black/5 hover:bg-red-600 hover:text-white transition-all;
  }

  /* 社交按钮 */
  .social-btn {
    @apply p-2 border border-black/5 hover:bg-red-600 hover:text-white transition-all;
  }

  .social-btn-dark {
    @apply p-2 border border-black/5 hover:bg-black hover:text-white transition-all;
  }

  .social-btn-accent {
    @apply p-2 bg-red-600 text-white hover:scale-110 transition-transform;
  }

  /* 卡片样式 */
  .card-vintage {
    @apply bg-paper-light p-3 shadow-lg transform transition-all duration-700
           border border-black/10;
  }

  .card-vintage:hover {
    @apply rotate-0;
  }

  .card-note {
    @apply bg-white border border-black/10 p-6 shadow-sm
           transform transition-transform cursor-pointer;
  }

  .card-note:hover {
    @apply rotate-0;
  }

  /* 项目卡片 */
  .project-card {
    @apply relative;
  }

  .project-card-image {
    @apply relative overflow-hidden border border-black/5 aspect-[4/3] mb-6
           grayscale transition-all duration-500;
  }

  .project-card:hover .project-card-image {
    @apply grayscale-0;
  }

  .project-card-overlay {
    @apply absolute inset-0 bg-black/40 opacity-0
           transition-opacity flex items-center justify-center;
  }

  .project-card:hover .project-card-overlay {
    @apply opacity-100;
  }

  /* 文章列表项 */
  .article-item {
    @apply border-b border-black/10 py-10 flex flex-col md:flex-row md:items-center
           hover:bg-white transition-all duration-300 cursor-pointer relative;
  }

  .article-item::after {
    content: '';
    @apply absolute bottom-0 left-0 w-0 h-[1px] bg-red-600 transition-all duration-500;
  }

  .article-item:hover::after {
    @apply w-full;
  }

  /* 标签样式 */
  .tag {
    @apply border border-black/20 px-2 py-0.5 text-xs font-typewriter;
  }

  .tag-filled {
    @apply bg-red-600 text-white px-3 py-1 font-mono text-xs tracking-widest uppercase;
  }

  .tag-outline {
    @apply border border-black px-3 py-1 font-mono text-xs tracking-widest uppercase bg-white/50;
  }

  /* 引用样式 */
  .quote-box {
    @apply relative p-16 bg-paper-light shadow-2xl transform
           border-2 border-black/5 tear-edge overflow-hidden;
  }

  .quote-text {
    @apply font-serif italic text-4xl md:text-5xl leading-tight tracking-tight
           text-black border-l-8 border-red-600 pl-8;
  }

  /* 章节标题 */
  .section-title {
    @apply font-serif italic text-5xl md:text-6xl mb-4;
  }

  .section-subtitle {
    @apply font-typewriter text-sm opacity-60;
  }

  /* 分隔线 */
  .divider {
    @apply w-24 h-1 bg-red-500;
  }

  .divider-dashed {
    @apply border-t-2 border-dashed border-black/10;
  }

  /* 容器 */
  .container-wide {
    @apply max-w-[1600px] mx-auto px-6 md:px-10;
  }

  .container-narrow {
    @apply max-w-4xl mx-auto px-6;
  }

  .container-medium {
    @apply max-w-6xl mx-auto px-6;
  }
}

@layer utilities {
  /* 动画关键帧 */
  @keyframes float {
    0%, 100% { transform: translateY(0) rotate(var(--rot, 0deg)); }
    50% { transform: translateY(-10px) rotate(var(--rot, 0deg)); }
  }

  @keyframes spin-slow {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
  }

  @keyframes ping-slow {
    75%, 100% {
      transform: scale(2);
      opacity: 0;
    }
  }

  @keyframes fade-in {
    from { opacity: 0; }
    to { opacity: 1; }
  }

  @keyframes slide-up {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes slide-in-from-top {
    from {
      opacity: 0;
      transform: translateY(-20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Drinking coffee animation - cup moves up like drinking */
  @keyframes drink {
    0% { transform: translateY(0) rotate(0deg); }
    25% { transform: translateY(-8px) rotate(-15deg); }
    50% { transform: translateY(-12px) rotate(-25deg); }
    75% { transform: translateY(-8px) rotate(-15deg); }
    100% { transform: translateY(0) rotate(0deg); }
  }

  @keyframes coffee-level {
    0% { transform: translateY(0); }
    50% { transform: translateY(8px); }
    100% { transform: translateY(0); }
  }

  /* 动画工具类 */
  .animate-float {
    animation: float 6s ease-in-out infinite;
  }

  .animate-spin-slow {
    animation: spin-slow 8s linear infinite;
  }

  .animate-ping-slow {
    animation: ping-slow 2s cubic-bezier(0, 0, 0.2, 1) infinite;
  }

  .animate-fade-in {
    animation: fade-in 0.5s ease-out;
  }

  .animate-slide-up {
    animation: slide-up 0.5s ease-out;
  }

  .animate-slide-in-from-top {
    animation: slide-in-from-top 0.5s ease-out;
  }

  .animate-drink {
    animation: drink 1.2s ease-in-out infinite;
  }

  .animate-coffee-level {
    animation: coffee-level 1.2s ease-in-out infinite;
  }

  .animate-drink-once {
    animation: drink 1s ease-in-out forwards;
  }

  /* 灰度滤镜 */
  .grayscale-hover {
    @apply grayscale hover:grayscale-0 transition-all duration-500;
  }

  /* 混合模式 */
  .mix-multiply {
    mix-blend-mode: multiply;
  }

  /* 拼贴画专用类 */
  .collage-container {
    @apply relative w-full h-screen overflow-hidden bg-paper;
  }

  .collage-item {
    @apply absolute transition-all duration-700 ease-out;
  }

  .collage-image {
    @apply grayscale contrast-125 transition-all duration-500;
  }

  /* 模拟抠图效果 - 通过混合模式让白色背景透明 */
  .cutout-multiply {
    mix-blend-mode: multiply;
  }

  /* 模拟撕纸边缘 */
  .paper-tear {
    mask-image: url('https://www.transparenttextures.com/patterns/pinstriped-suit.png'); /* 占位，实际用clip-path */
  }

  .paper-shadow {
    filter: drop-shadow(8px 12px 10px rgba(0,0,0,0.15));
  }

  /* 透明度层级 */
  .collage-bg {
    opacity: 0.12;
  }

  .collage-mid {
    opacity: 0.3;
  }

  .collage-fg {
    opacity: 0.82;
  }

  /* 胶带效果 */
  .tape-clear {
    @apply absolute w-16 h-6 bg-white/20 backdrop-blur-sm -rotate-12 z-50 pointer-events-none border-l border-r border-white/10;
  }

  .tape-red {
    @apply absolute w-12 h-4 bg-red-600/40 -rotate-3 z-50 pointer-events-none;
  }

  .collage-label {
    @apply font-mono text-[9px] uppercase tracking-[0.2em] bg-black text-white px-2 py-0.5;
  }

  /* 红色手绘笔触/箭头 */
  .scribble-red {
    @apply absolute pointer-events-none;
    background-repeat: no-repeat;
    background-size: 100% 100%;
  }

  .scribble-red-underline {
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 200 30'%3E%3Cpath d='M5 20 C60 35 120 5 195 18' stroke='%23dc2626' stroke-width='6' fill='none' stroke-linecap='round'/%3E%3C/svg%3E");
  }

  .scribble-red-arc {
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 200 80'%3E%3Cpath d='M10 60 C40 10 160 10 190 60' stroke='%23dc2626' stroke-width='6' fill='none' stroke-linecap='round'/%3E%3C/svg%3E");
  }

  .scribble-red-arrow {
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 160 60'%3E%3Cpath d='M10 30 L120 30' stroke='%23dc2626' stroke-width='6' fill='none' stroke-linecap='round'/%3E%3Cpath d='M100 15 L140 30 L100 45' stroke='%23dc2626' stroke-width='6' fill='none' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E");
  }

  .collage-red-accent {
    @apply absolute pointer-events-none mix-multiply text-red-600/60;
  }

  .hand-drawn-circle {
    @apply border-4 border-red-600/40 rounded-[40%_60%_70%_30%/40%_50%_60%_50%] rotate-3;
  }

  .hand-drawn-arrow {
    @apply text-red-600/60 select-none;
  }

  .halftone-red {
    @apply relative;
  }

  .halftone-red::after {
    content: "";
    @apply absolute inset-0 pointer-events-none mix-multiply;
    background-image: radial-gradient(rgba(220, 38, 38, 0.4) 1px, transparent 0);
    background-size: 4px 4px;
  }

  @keyframes circle-pulse {
    0% { transform: scale(0.94); opacity: 0.55; }
    60% { transform: scale(1.04); opacity: 0.9; }
    100% { transform: scale(1); opacity: 0.55; }
  }

  .scribble-circle-anim {
    animation: circle-pulse 2.6s ease-in-out infinite;
  }

  /* Waving hand animation */
  @keyframes wave {
    0% { transform: rotate(0deg); }
    10% { transform: rotate(14deg); }
    20% { transform: rotate(-8deg); }
    30% { transform: rotate(14deg); }
    40% { transform: rotate(-4deg); }
    50% { transform: rotate(10deg); }
    60% { transform: rotate(0deg); }
    100% { transform: rotate(0deg); }
  }

  .animate-wave {
    animation: wave 2.5s ease-in-out infinite;
  }

  /* 数字序号背景 */
  .number-bg {
    @apply absolute -top-4 -left-4 font-serif text-6xl text-red-500/10 -z-10 italic;
  }

  /* 文字截断 */
  .truncate-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .truncate-3 {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  /* 阴影 */
  .shadow-vintage {
    box-shadow: 15px 15px 0px rgba(0,0,0,0.05);
  }

  .shadow-heavy {
    box-shadow: 40px 40px 0px rgba(239,68,68,0.05);
  }

  /* 文字渐变 */
  .text-gradient-red {
    @apply bg-gradient-to-r from-red-600 to-orange-500 bg-clip-text text-transparent;
  }
}
